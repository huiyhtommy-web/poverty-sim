<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¦™æ¸¯åŸºå±¤å®¶åº­ç†è²¡æ¨¡æ“¬å™¨</title>
    <!-- ç¶²é åˆ†é åœ–ç¤º (Favicon) - ä½¿ç”¨ SVG èˆ‡ Emoji å‹•æ…‹ç”Ÿæˆ -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸª™</text></svg>">
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ React èˆ‡ ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <!-- å¼•å…¥ Babel ä»¥åœ¨ç€è¦½å™¨ä¸­ç·¨è­¯ JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        /* éš±è—æ²è»¸ä»¥ç¾åŒ–ä»‹é¢ */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        .animate-bounce-custom { animation: bounce-custom 0.3s ease-in-out; }
        @keyframes bounce-custom {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
    </style>
</head>
<body class="bg-gray-100 font-sans text-gray-800 overflow-x-hidden">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- SVG åœ–ç¤ºçµ„ä»¶ ---
        const IconHome = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>;
        const IconUtensils = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/></svg>;
        const IconArrowRight = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>;
        const IconBookOpen = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>;
        const IconStethoscope = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3"/><path d="M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4"/><circle cx="20" cy="10" r="2"/></svg>;
        const IconAlertCircle = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>;
        const IconCheckCircle = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="m9 11 3 3L22 4"/></svg>;
        const IconShirt = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M20.38 3.46 16 2a8 8 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z"/></svg>;
        const IconActivity = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>;
        const IconStar = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>;
        const IconUsers = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>;
        const IconHeartCrack = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/><path d="m12 13-1-1 2-2-3-3 2-2"/></svg>;
        const IconCoin = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><path d="M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"/><path d="M12 18V6"/></svg>;

        const PovertySim = () => {
            const INCOME = 11850;
            
            const [choices, setChoices] = useState({
                housing: 0,
                food: 0,
                transport: 0,
                education: 0,
                medical: 0,
                utilities: 0,
                clothes: 0
            });

            const [showResult, setShowResult] = useState(false);
            const [animationClass, setAnimationClass] = useState('');
            
            const categories = [
                {
                    id: 'housing',
                    title: '1. å±…ä½ç’°å¢ƒ (Housing)',
                    icon: <IconHome className="w-5 h-5 text-blue-500" />,
                    options: [
                        { price: 7500, label: 'èˆŠæ¨“å…©æˆ¿å–®ä½', desc: 'é›–ç„¶èˆŠä½†æœ‰ç¨ç«‹æˆ¿çª—ï¼Œä½æ–¼å¸‚å€ã€‚', quality: 'å°šå¯', impact: '', image: 'https://i.postimg.cc/cHX4hM2G/1.jpg' },
                        { price: 4800, label: 'æ·±æ°´åŸ—åŠæˆ¿', desc: '120å‘ï¼Œå»šå»åˆä¸€ã€‚', quality: 'æƒ¡åŠ£', impact: 'ç©ºé–“æ¥µåº¦æ“ è¿«ï¼Œæ²¹ç…™å‘³é‡ï¼Œå…„å¦¹ç„¡è™•è½‰èº«ï¼Œå®¹æ˜“å› çˆ­å¥ªç©ºé–“è€Œåµæ¶ã€‚', concept: '#ç©ºé–“è²§çª®', affects: { quality: 1, relationship: 1, health: 0.5 }, image: 'https://i.postimg.cc/HxBsz4Kf/2.jpg' },
                        { price: 3500, label: 'åé æ‘å±‹/å”æ¨“', desc: 'æ–°ç•Œåé åœ°å€æˆ–é«˜å±¤ç„¡å‡é™æ©Ÿå”æ¨“ã€‚', quality: 'æ¥µå·®', impact: 'é›–ç„¶ç§Ÿé‡‘è¼ƒä½ï¼Œä½†äº¤é€šè²»é«˜æ˜‚ä¸”é€šå‹¤æ¥µé•·ï¼ˆæ™‚é–“è²§çª®ï¼‰ã€‚è‹¥ä½é«˜å±¤å”æ¨“ï¼Œæ¯æ—¥ä¸Šè½æ¨“æ¢¯é«”åŠ›é€æ”¯ï¼Œä¸”èˆŠæ¨“è¡›ç”Ÿç’°å¢ƒè¼ƒå·®ï¼ŒèšŠèŸ²é¼ æ‚£é »ç”Ÿã€‚', concept: '#å±…ä½ä¸å…¬', affects: { quality: 1.2, relationship: 1, health: 1 }, image: 'https://i.postimg.cc/wv0T2cPn/3.jpg' }
                    ]
                },
                {
                    id: 'food',
                    title: '2. è†³é£Ÿé–‹æ”¯ (Food)',
                    icon: <IconUtensils className="w-5 h-5 text-orange-500" />,
                    options: [
                        { price: 4500, label: 'è¡—å¸‚è²·é¤¸ç…®é£¯', desc: 'å …æŒæ¯æ—¥æ–°é®®é£Ÿæï¼Œä¸‰é¤¸ä¸€æ¹¯ã€‚', quality: 'å¥åº·', impact: '', image: 'https://i.postimg.cc/B6MQpcyV/4.jpg' },
                        { price: 3000, label: 'æ€¥å‡èˆ‡ç‰¹åƒ¹å“', desc: 'å°ˆæ”»è¶…å¸‚ç‰¹åƒ¹èˆ‡æ€¥å‡è‚‰è‡ªè¡Œç…®é£Ÿã€‚', quality: 'æ™®é€š', impact: 'ç‡Ÿé¤Šæ”å–ä¸å‡ï¼Œé•·æœŸé£Ÿç”¨æ€¥å‡è‚‰é¡ï¼Œç¼ºä¹æ–°é®®è”¬æœï¼Œå­©å­é«”è³ªè¼ƒå¼±ã€‚', concept: '#éš±æ€§é£¢é¤“', affects: { quality: 0.5, relationship: 0, health: 0.5 }, image: 'https://i.postimg.cc/gjjcTLFT/5.jpg' },
                        { price: 3500, label: 'å»‰åƒ¹å…©é¤¸é£¯/å¿«é¤', desc: 'å› å·¥ä½œç–²å‹ç„¡æš‡ç…®é£Ÿï¼Œå…¨å®¶åƒå¹³åƒ¹å¤–è³£ã€‚', quality: 'æ¥µå·®', impact: 'é›–ç„¶ç¯€çœäº†æ™‚é–“ï¼Œä½†é•·æœŸæ”å–é«˜æ²¹ã€é«˜é¹½ã€é«˜ç³–é£Ÿç‰©ï¼ˆä¸‰é«˜ï¼‰ï¼Œç¼ºä¹è†³é£Ÿçº–ç¶­ï¼Œå¢åŠ æ‚£é•·æœŸç—…é¢¨éšªï¼Œä¸”å¤±å»å®¶åº­é£¯æ¡Œçš„äº¤æµæ™‚å…‰ã€‚', concept: '#é£Ÿç‰©ä¸å®‰å…¨', affects: { quality: 0.8, relationship: 0.8, health: 1.2 }, image: 'https://i.postimg.cc/7hhPWJ8c/6.jpg' }
                    ]
                },
                {
                    id: 'transport',
                    title: '3. äº¤é€šå‡ºè¡Œ (Transport)',
                    icon: <IconArrowRight className="w-5 h-5 text-gray-500" />,
                    options: [
                        { price: 1200, label: 'æ¸¯éµèˆ‡å·´å£«', desc: 'æ­£å¸¸é€šå‹¤ï¼Œç¢ºä¿ç¡çœ æ™‚é–“ã€‚', quality: 'æ­£å¸¸', impact: '', image: 'https://i.postimg.cc/6qq6m4Jg/7.jpg' },
                        { price: 100, label: 'æ­¥è¡Œæˆ–è¸©å–®è»Š', desc: 'æ¥µé™ç¯€çœï¼Œç„¡è«–å¤šé éƒ½ç›¡é‡ä¸æ­è»Šã€‚', quality: 'ç–²å‹', impact: 'æ—¥æ›¬é›¨æ·‹ï¼Œæ¥µåº¦æ¶ˆè€—é«”åŠ›ã€‚åœ¨ç¹å¿™é¦¬è·¯é‚Šè¡Œèµ°æˆ–è¸å–®è»Šå¸å…¥å»¢æ°£ï¼Œäº¦æœ‰äº¤é€šå®‰å…¨é¢¨éšªã€‚å›å®¶å¾Œç´¯å¾—ç„¡æ³•èˆ‡å®¶äººäº’å‹•ã€‚', concept: '#æ™‚é–“è²§çª®', affects: { quality: 0.8, relationship: 1.2, health: 1 }, image: 'https://i.postimg.cc/rssyPR26/8.jpg' }
                    ]
                },
                {
                    id: 'education',
                    title: '4. å­å¥³æ•™è‚² (Education)',
                    icon: <IconBookOpen className="w-5 h-5 text-green-600" />,
                    options: [
                        { price: 2500, label: 'è£œç¿’èˆ‡èˆˆè¶£ç­', desc: 'å°ˆç§‘è£œç¿’ + ä¸€é …èˆˆè¶£ï¼ˆå¦‚ç•«ç•«ï¼‰ã€‚', quality: 'è‰¯å¥½', impact: '', image: 'https://i.postimg.cc/6qq6m4xW/9.jpg' },
                        { price: 1500, label: 'åªè£œä¸»ç§‘', desc: 'åªè£œè‹±æ–‡/æ•¸å­¸ï¼Œæ”¾æ£„èˆˆè¶£ç­ã€‚', quality: 'åŸºæœ¬', impact: 'ä¿ä½äº†å­¸æ¥­åŸºæœ¬ç›¤ï¼Œä½†ç”Ÿæ´»åªå‰©ä¸‹è®€æ›¸èˆ‡è€ƒè©¦ã€‚ç¼ºä¹æ‰è—ç™¼å±•ï¼Œå­©å­åœ¨å­¸æ ¡è©±é¡Œæ¸›å°‘ï¼Œç”Ÿæ´»å–®èª¿ä¹å‘³ã€‚', concept: '#ç™¼å±•æ¬Šåˆ©å‰å¥ª', affects: { quality: 0.5, relationship: 0.5, health: 0.2 }, image: 'https://i.postimg.cc/mkkZ51W2/10.jpg' },
                        { price: 500, label: 'åŸºæœ¬æ›¸ç°¿é›œè²»', desc: 'å®Œå…¨ä¸è£œç¿’ï¼Œä¾è³´å­¸æ ¡è³‡æºã€‚', quality: 'çŠ§ç‰²', impact: 'çˆ¶æ¯ç„¡åŠ›æŒ‡å°åŠŸèª²ï¼Œæˆç¸¾å®¹æ˜“è½å¾Œã€‚å› æ¬ ç¼ºé¡å¤–è³‡æºï¼Œç”¢ç”Ÿåš´é‡å­¸ç¿’ç„¦æ…®èˆ‡è‡ªå‘æ„Ÿï¼Œé™·å…¥è·¨ä»£è²§çª®å¾ªç’°ã€‚', concept: '#è·¨ä»£è²§çª®', affects: { quality: 1, relationship: 0.8, health: 0.5 }, image: 'https://i.postimg.cc/NFFGz2vj/11.jpg' }
                    ]
                },
                {
                    id: 'medical',
                    title: '5. é†«ç™‚å¥åº· (Medical)',
                    icon: <IconStethoscope className="w-5 h-5 text-red-500" />,
                    options: [
                        { price: 800, label: 'ç§å®¶è¨ºæ‰€', desc: 'ç”Ÿç—…å³çœ‹é†«ç”Ÿï¼Œå¿«é€Ÿåº·å¾©ã€‚', quality: 'å®‰å¿ƒ', impact: '', image: 'https://i.postimg.cc/3NNrc0Qy/12.jpg' },
                        { price: 200, label: 'å…¬ç«‹é–€è¨º', desc: 'æ¸…æ™¨æ’ç±Œæˆ–è¼ªå€™æ€¥ç—‡ã€‚', quality: 'é¢¨éšª', impact: 'éœ€èŠ±è²»å¤§é‡æ™‚é–“è¼ªå€™ï¼Œå¾€å¾€å°ç—…æ‹–æˆå¤§ç—…ã€‚ç”Ÿç—…æœŸé–“ç„¡æ³•ä¼‘æ¯ä»éœ€ç…§é¡§å®¶åº­ï¼Œèº«å¿ƒä¿±ç–²ã€‚', concept: '#é†«ç™‚å¯é”æ€§', affects: { quality: 0.5, relationship: 0.5, health: 0.8 }, image: 'https://i.postimg.cc/Y0P2K2tC/13.jpg' },
                        { price: 50, label: 'æˆè—¥/å¿ç—›', desc: 'è‡ªè¡Œè²·è—¥æˆ–å¿è€ï¼Œä¸çœ‹é†«ç”Ÿã€‚', quality: 'å±éšª', impact: 'ç¼ºä¹å°ˆæ¥­è¨ºæ–·ï¼Œå­˜åœ¨èª¤è¨ºé¢¨éšªï¼ˆå¦‚èƒƒç—›ç•¶æ¶ˆåŒ–ä¸è‰¯ï¼‰ã€‚é•·æœŸç—›ç—‡ï¼ˆå¦‚ç‰™ç—›ï¼‰å°è‡´è„¾æ°£æš´èºï¼Œåš´é‡å½±éŸ¿å®¶åº­å’Œè«§ã€‚', concept: '#å¥åº·ä¸å¹³ç­‰', affects: { quality: 1, relationship: 1.2, health: 1.5 }, image: 'https://i.postimg.cc/prSVbVPd/14.jpg' }
                    ]
                },
                {
                    id: 'utilities',
                    title: '6. æ°´é›»ç…¤ç¶² (Utilities)',
                    icon: <IconAlertCircle className="w-5 h-5 text-yellow-500" />,
                    options: [
                        { price: 1000, label: 'èˆ’é©ä½¿ç”¨', desc: 'å¤å¤©é–‹å†·æ°£ã€ç©©å®šå¯¬é »ã€‚', quality: 'èˆ’é©', impact: '', image: 'https://i.postimg.cc/x8ZjDj98/15.jpg' },
                        { price: 700, label: 'å¯©æ…ä½¿ç”¨', desc: 'é™æ™‚é–‹å†·æ°£ï¼Œæ™‚åˆ»ç•™æ„é›»éŒ¶ã€‚', quality: 'ç·Šå¼µ', impact: 'ç‚ºäº†çœé›»ï¼Œå³ä½¿ç†±ä¹Ÿåªé–‹é¢¨æ‰‡ï¼Œåªæœ‰ç¡è¦ºå‰æ‰æ•¢é–‹ä¸€æœƒå†·æ°£ã€‚å…¨å®¶äººç²¾ç¥ç·Šå¼µï¼Œæ™‚å¸¸ç‚ºã€Œèª°å¿˜äº†é—œç‡ˆã€è€Œçˆ­åµã€‚', concept: '#èƒ½æºç„¦æ…®', affects: { quality: 0.5, relationship: 0.5, health: 0.2 }, image: 'https://i.postimg.cc/mknZfZTc/16.jpg' },
                        { price: 400, label: 'æ¥µé™æ…³é›»/æ–·ç¶²', desc: 'ä¸é–‹å†·æ°£ï¼Œå–æ¶ˆå®¶å±…å¯¬é »ã€‚', quality: 'è‰±è‹¦', impact: 'é…·ç†±é›£çœ å½±éŸ¿ç²¾ç¥åŠæ—¥é–“å·¥ä½œè¡¨ç¾ï¼›æ•¸ç¢¼é´»æºå°è‡´å­©å­ç„¡æ³•åœ¨å®¶å®Œæˆç¶²ä¸Šä½œæ¥­ï¼Œå­¸ç¿’é€²åº¦è½å¾Œã€‚', concept: '#æ•¸ç¢¼é´»æº', affects: { quality: 1.2, relationship: 0.8, health: 1 }, image: 'https://i.postimg.cc/1XdRhRy0/17.jpg' }
                    ]
                },
                {
                    id: 'clothes',
                    title: '7. è¡£ç‰©é‹å±¥ (Clothing)',
                    icon: <IconShirt className="w-5 h-5 text-purple-500" />,
                    options: [
                        { price: 500, label: 'å­£å­£æ·»ç½®', desc: 'æ ¡æœåˆèº«æ•´æ½”ï¼Œä¿æŒè‡ªä¿¡ã€‚', quality: 'é«”é¢', impact: '', image: 'https://i.postimg.cc/1XdRhRyr/18.jpg' },
                        { price: 200, label: 'ç‰¹åƒ¹/å¹³åƒ¹ç¶²è³¼', desc: 'è³¼è²·æ·˜å¯¶æˆ–ç‰¹è³£å ´è¡£ç‰©ã€‚', quality: 'æ™®é€š', impact: 'è³ªæ–™è¼ƒå·®æˆ–æ¬¾å¼éæ™‚ï¼Œé‹å­å®¹æ˜“ç£¨è…³ã€‚é›–èƒ½è”½é«”ï¼Œä½†åœ¨è‘—é‡ç‰©è³ªçš„æœ‹è¼©åœˆå­ä¸­å¯èƒ½æœƒæ„Ÿåˆ°å°·å°¬ã€‚', concept: '#ç‰©è³ªåŒ±ä¹', affects: { quality: 0.5, relationship: 0.2, health: 0.1 }, image: 'https://i.postimg.cc/HnNWDWTz/19.jpg' },
                        { price: 0, label: 'èˆŠè¡£ç¸«è£œ', desc: 'ç©¿è¦ªæˆšèˆŠè¡£ï¼Œè† æ°´é»é‹ã€‚', quality: 'çŠ§ç‰²', impact: 'æ ¡æœç™¼é»ƒçŸ­å°ï¼Œè¢«åŒå­¸å–ç¬‘ï¼Œå­©å­å› æ­¤æŠ—æ‹’ä¸Šå­¸ï¼Œè‡ªæˆ‘å½¢è±¡ä½è½ï¼Œç”¢ç”Ÿç¤¾äº¤é€€ç¸®ã€‚', concept: '#ç¤¾æœƒæ¨™ç±¤', affects: { quality: 1, relationship: 0.8, health: 0.5 }, image: 'https://i.postimg.cc/yxG6467v/20.jpg' }
                    ]
                }
            ];

            const totalExpenses = Object.keys(choices).reduce((acc, key) => {
                const category = categories.find(c => c.id === key);
                return acc + category.options[choices[key]].price;
            }, 0);

            const balance = INCOME - totalExpenses;
            const isDeficit = balance < 0;

            const handleSelect = (categoryId, optionIndex) => {
                setChoices(prev => ({ ...prev, [categoryId]: optionIndex }));
                setAnimationClass('animate-bounce-custom');
                setTimeout(() => setAnimationClass(''), 300);
            };

            const calculateScores = () => {
                let scores = { quality: 100, relationship: 100, health: 100 };
                const MULTIPLIER = 15;
                
                Object.keys(choices).forEach(key => {
                    const category = categories.find(c => c.id === key);
                    const selectedOptionIndex = choices[key];
                    
                    if (selectedOptionIndex > 0 && category.options[selectedOptionIndex].affects) {
                        const affects = category.options[selectedOptionIndex].affects;
                        if (affects.quality) scores.quality -= (affects.quality * MULTIPLIER);
                        if (affects.relationship) scores.relationship -= (affects.relationship * MULTIPLIER);
                        if (affects.health) scores.health -= (affects.health * MULTIPLIER);
                    }
                });

                return {
                    quality: Math.max(0, scores.quality),
                    relationship: Math.max(0, scores.relationship),
                    health: Math.max(0, scores.health)
                };
            };

            const scores = calculateScores();

            const getScoreColor = (score) => {
                if (score >= 80) return 'text-green-600';
                if (score >= 50) return 'text-amber-500';
                return 'text-red-600';
            };

            const getBarColor = (score) => {
                if (score >= 80) return 'bg-green-500';
                if (score >= 50) return 'bg-amber-400';
                return 'bg-red-500';
            };

            const activeImpacts = categories
                .filter(cat => choices[cat.id] > 0 && cat.options[choices[cat.id]].impact)
                .map(cat => ({
                    title: cat.title.split(' ')[1], 
                    text: cat.options[choices[cat.id]].impact,
                    icon: cat.icon,
                    concept: cat.options[choices[cat.id]].concept,
                    affects: cat.options[choices[cat.id]].affects
                }));

            return (
                /* å„ªåŒ–éŸ¿æ‡‰å¼ä½ˆå±€ï¼šåœ¨æ‰‹æ©Ÿç‰ˆå…è¨±è‡ªç„¶æ»¾å‹• (ç„¡ h-screen)ï¼Œåœ¨æ¡Œé¢ç‰ˆ (lg:) å¥—ç”¨å·¦å³åˆ†å‰²èˆ‡å„è‡ªæ»¾å‹• */
                <div className="min-h-screen bg-gray-100 font-sans text-gray-800 flex flex-col lg:flex-row lg:h-screen lg:overflow-hidden">
                    
                    {/* LEFT COLUMN: Scrollable Content (Financials & Choices) */}
                    <div className="flex-1 flex flex-col lg:h-full lg:overflow-y-auto relative">
                        
                        {/* COMPACT HEADER: æé«˜ z-index ç¢ºä¿åœ¨æ‰‹æ©Ÿæ»‘å‹•æ™‚å§‹çµ‚ç½®é ‚ */}
                        <header className="bg-slate-800 text-white p-3 sticky top-0 z-40 shadow-lg border-b-4 border-slate-600">
                            <div className="max-w-3xl mx-auto w-full space-y-2">
                                {/* Top Row: Title & Income */}
                                <div className="flex justify-between items-center">
                                    <div className="flex items-baseline gap-2">
                                        <h1 className="text-base font-bold tracking-wide">è²§çª®æ¨¡æ“¬å™¨</h1>
                                        <span className="text-[10px] text-slate-400">ç›®æ¨™ï¼šç”Ÿå­˜</span>
                                    </div>
                                    <div className="flex items-center gap-2 bg-slate-700/50 px-2 py-1 rounded border border-slate-600">
                                        <span className="text-[10px] text-slate-300 uppercase flex items-center gap-1">
                                            <IconCoin className="w-3 h-3 text-yellow-400" />
                                            å›ºå®šæœˆå…¥
                                        </span>
                                        <span className="font-bold text-sm text-white">${INCOME.toLocaleString()}</span>
                                    </div>
                                </div>

                                {/* Middle Row: Stats */}
                                <div className="bg-slate-900/40 rounded-lg p-2 border border-slate-700 flex justify-between items-center">
                                    <div className="flex flex-col">
                                        <span className="text-[10px] text-slate-400">é è¨ˆçµé¤˜</span>
                                        <span className={`text-2xl font-bold leading-none ${isDeficit ? 'text-red-400' : 'text-green-400'} ${animationClass} transition-all duration-300`}>
                                            {balance > 0 ? '+' : ''}{balance.toLocaleString()}
                                        </span>
                                    </div>
                                    <div className="flex flex-col items-end">
                                        <span className="text-[10px] text-slate-400">ç¸½æ”¯å‡º</span>
                                        <span className="text-lg font-bold text-white leading-none">${totalExpenses.toLocaleString()}</span>
                                    </div>
                                </div>

                                {/* Progress Bar */}
                                <div className="relative h-1.5 w-full bg-slate-700 rounded-full overflow-hidden">
                                    <div style={{ width: `${Math.min((totalExpenses / INCOME) * 100, 100)}%` }} className={`h-full transition-all duration-500 ${isDeficit ? 'bg-red-500' : 'bg-green-500'}`}></div>
                                </div>

                                {/* Warning Message */}
                                {isDeficit ? (
                                    <div className="bg-red-500/10 border border-red-500/50 text-red-200 px-2 py-1 rounded text-xs font-bold flex items-center justify-center gap-2">
                                        <IconAlertCircle className="w-3 h-3 text-red-400" />
                                        <span>è­¦å‘Šï¼šå…¥ä¸æ•·å‡ºï¼è«‹é¸æ“‡ä¾¿å®œé¸é …ã€‚</span>
                                    </div>
                                ) : (
                                    <div className="bg-green-500/10 border border-green-500/50 text-green-200 px-2 py-1 rounded text-xs font-bold flex items-center justify-center gap-2">
                                        <IconCheckCircle className="w-3 h-3 text-green-400" />
                                        <span>æ”¶æ”¯å¹³è¡¡ã€‚ç•™æ„å³å´ç”Ÿæ´»æŒ‡æ•¸ã€‚</span>
                                    </div>
                                )}
                            </div>
                        </header>

                        {/* Categories List */}
                        <div className="p-4 space-y-4 pb-6 lg:pb-24 max-w-3xl mx-auto w-full mt-2">
                            {categories.map((cat) => (
                                <div key={cat.id} className="bg-white rounded-lg shadow-sm p-4 hover:shadow-md transition-shadow">
                                    <div className="flex items-center gap-2 mb-3">
                                        {cat.icon}
                                        <h3 className="font-bold text-lg">{cat.title}</h3>
                                    </div>

                                    {/* éŸ¿æ‡‰å¼ç¶²æ ¼ï¼šæ‰‹æ©Ÿ 1 åˆ—ï¼Œå¤§è¢å¹• 2 åˆ— */}
                                    <div className="grid gap-4 grid-cols-1 sm:grid-cols-2">
                                        {cat.options.map((option, index) => {
                                            const isSelected = choices[cat.id] === index;
                                            let badgeColor = 'bg-green-500';
                                            if (index === 1) badgeColor = 'bg-amber-500';
                                            if (index === 2) badgeColor = 'bg-red-500';

                                            return (
                                                <button
                                                    key={index}
                                                    onClick={() => handleSelect(cat.id, index)}
                                                    className={`w-full text-left p-3 rounded-lg border-2 transition-all duration-200 relative group flex flex-col h-full ${isSelected ? 'border-blue-500 bg-blue-50 ring-2 ring-blue-100' : 'border-gray-200 hover:border-gray-300 bg-white'}`}
                                                >
                                                    {option.image && (
                                                        <div className="mb-3 w-full bg-white rounded-md overflow-hidden border border-gray-100">
                                                            <img src={option.image} alt={option.label} className="w-full h-40 object-cover mx-auto" />
                                                        </div>
                                                    )}
                                                    <div className="flex flex-col gap-1 mb-2">
                                                        <span className={`font-bold text-base ${isSelected ? 'text-blue-700' : 'text-gray-700'}`}>{option.label}</span>
                                                        <span className="font-mono font-bold text-slate-600 text-lg">${option.price.toLocaleString()}</span>
                                                    </div>
                                                    <p className="text-xs text-gray-500 flex-grow mb-2 leading-relaxed">{option.desc}</p>
                                                    
                                                    <div className="mt-auto pt-2 border-t border-gray-100 flex justify-between items-center">
                                                        <span className={`text-[10px] text-white px-2 py-0.5 rounded-full ${badgeColor}`}>{option.quality}</span>
                                                        {index > 0 && isSelected && (
                                                            <span className="text-[10px] text-red-500 font-bold">{index === 1 ? '-åˆ†' : '--åˆ†'}</span>
                                                        )}
                                                    </div>
                                                </button>
                                            );
                                        })}
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    {/* RIGHT COLUMN: Quality of Life */}
                    <div className="w-full lg:w-[400px] bg-slate-50 border-t lg:border-t-0 lg:border-l border-gray-200 flex flex-col h-auto lg:h-full shadow-[0_-10px_40px_rgba(0,0,0,0.05)] lg:shadow-2xl z-30">
                        <div className="p-6 flex flex-col h-full lg:overflow-y-auto">
                            
                            {/* Status Scores Section */}
                            <div className="mb-6 bg-white p-4 rounded-xl shadow-sm border border-gray-100">
                                <h2 className="text-lg font-bold text-gray-800 flex items-center gap-2 mb-1">
                                    <IconActivity className="text-slate-600 w-5 h-5" />
                                    ç›®å‰ç”Ÿæ´»ç‹€æ³æŒ‡æ•¸
                                </h2>
                                <p className="text-xs text-gray-400 mb-4">åˆå§‹ 100 åˆ†ï¼Œæ•¸å€¼è¶Šä½ä»£è¡¨ç‹€æ³è¶Šå±æ€¥</p>
                                
                                <div className="space-y-4">
                                    <div>
                                        <div className="flex justify-between items-center mb-1">
                                            <span className="text-sm font-bold text-gray-600 flex items-center gap-2"><IconStar className="w-4 h-4 text-amber-500" /> ç”Ÿæ´»å“è³ª</span>
                                            <span className={`text-sm font-bold ${getScoreColor(scores.quality)}`}>{scores.quality.toFixed(0)}/100</span>
                                        </div>
                                        <div className="h-3 bg-gray-200 rounded-full overflow-hidden">
                                            <div className={`h-full transition-all duration-500 ${getBarColor(scores.quality)}`} style={{ width: `${scores.quality}%` }}></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div className="flex justify-between items-center mb-1">
                                            <span className="text-sm font-bold text-gray-600 flex items-center gap-2"><IconUsers className="w-4 h-4 text-blue-500" /> å®¶åº­é—œä¿‚</span>
                                            <span className={`text-sm font-bold ${getScoreColor(scores.relationship)}`}>{scores.relationship.toFixed(0)}/100</span>
                                        </div>
                                        <div className="h-3 bg-gray-200 rounded-full overflow-hidden">
                                            <div className={`h-full transition-all duration-500 ${getBarColor(scores.relationship)}`} style={{ width: `${scores.relationship}%` }}></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div className="flex justify-between items-center mb-1">
                                            <span className="text-sm font-bold text-gray-600 flex items-center gap-2"><IconHeartCrack className="w-4 h-4 text-red-500" /> èº«å¿ƒå¥åº·</span>
                                            <span className={`text-sm font-bold ${getScoreColor(scores.health)}`}>{scores.health.toFixed(0)}/100</span>
                                        </div>
                                        <div className="h-3 bg-gray-200 rounded-full overflow-hidden">
                                            <div className={`h-full transition-all duration-500 ${getBarColor(scores.health)}`} style={{ width: `${scores.health}%` }}></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Impact Explanations */}
                            <div className="flex-1 space-y-4">
                                <h3 className="text-sm font-bold text-gray-400 uppercase tracking-wider border-b pb-2">ç•¶å‰é¸æ“‡çš„çµæœ</h3>
                                {activeImpacts.length === 0 ? (
                                    <div className="text-center py-4 text-gray-400 italic text-sm"><p>ç›®å‰ç”Ÿæ´»ç¶­æŒåœ¨ç†æƒ³ç‹€æ…‹ã€‚</p></div>
                                ) : (
                                    <div className="space-y-4">
                                        {activeImpacts.map((impact, idx) => (
                                            <div key={idx} className="bg-white p-4 rounded-lg shadow-sm border-l-4 border-red-400">
                                                <div className="flex items-center justify-between mb-2">
                                                    <div className="flex items-center gap-2 text-slate-700 font-bold">
                                                        {impact.icon}<span>{impact.title}</span>
                                                    </div>
                                                    <div className="flex gap-1">
                                                        {impact.affects?.quality > 0 && <IconStar className="w-3 h-3 text-amber-500" />}
                                                        {impact.affects?.relationship > 0 && <IconUsers className="w-3 h-3 text-blue-500" />}
                                                        {impact.affects?.health > 0 && <IconHeartCrack className="w-3 h-3 text-red-500" />}
                                                    </div>
                                                </div>
                                                <p className="text-sm text-gray-600 leading-relaxed mb-2">{impact.text}</p>
                                                {impact.concept && <span className="text-[10px] bg-red-50 text-red-600 border border-red-100 px-2 py-1 rounded inline-block">{impact.concept}</span>}
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>

                            {/* Action Button */}
                            <div className="mt-6 pt-6 border-t">
                                <button 
                                    onClick={() => setShowResult(true)}
                                    disabled={isDeficit}
                                    className={`w-full py-4 rounded-xl font-bold text-lg shadow-lg transition-all transform active:scale-95 ${isDeficit ? 'bg-gray-200 text-gray-400 cursor-not-allowed' : 'bg-slate-800 text-white hover:bg-slate-700'}`}
                                >
                                    {isDeficit ? 'è«‹å…ˆæ¶ˆé™¤èµ¤å­—' : 'ç¢ºèªæœˆåº¦é ç®—'}
                                </button>
                            </div>
                        </div>
                    </div>

                    {/* Result Modal */}
                    {showResult && (
                        <div className="fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 backdrop-blur-sm">
                            <div className="bg-white rounded-2xl max-w-md w-full p-8 overflow-y-auto max-h-[90vh]">
                                <h2 className="text-2xl font-bold mb-4 text-center">é«”é©—ç¸½çµ</h2>
                                <p className="text-gray-600 mb-6 text-center">æ‚¨æˆåŠŸå¹³è¡¡äº†æ”¶æ”¯ï¼Œä½†é€™æ˜¯æ‚¨å®¶åº­æœ¬æœˆçš„ç”Ÿæ´»ç‹€æ…‹ï¼š</p>
                                
                                <div className="flex justify-around mb-6 text-center gap-2">
                                    <div className="flex-1 bg-amber-50 p-2 rounded-lg">
                                        <div className={`text-2xl font-bold ${getScoreColor(scores.quality)}`}>{scores.quality.toFixed(0)}</div>
                                        <div className="text-xs text-gray-500">ç”Ÿæ´»å“è³ª</div>
                                    </div>
                                    <div className="flex-1 bg-blue-50 p-2 rounded-lg">
                                        <div className={`text-2xl font-bold ${getScoreColor(scores.relationship)}`}>{scores.relationship.toFixed(0)}</div>
                                        <div className="text-xs text-gray-500">å®¶åº­é—œä¿‚</div>
                                    </div>
                                    <div className="flex-1 bg-red-50 p-2 rounded-lg">
                                        <div className={`text-2xl font-bold ${getScoreColor(scores.health)}`}>{scores.health.toFixed(0)}</div>
                                        <div className="text-xs text-gray-500">èº«å¿ƒå¥åº·</div>
                                    </div>
                                </div>
                                
                                <div className="space-y-3 mb-8 bg-gray-50 p-4 rounded-xl">
                                    {activeImpacts.length > 0 ? activeImpacts.map((impact, i) => (
                                        <div key={i} className="flex gap-3 text-sm text-gray-700">
                                            <span className="text-red-500 mt-1 min-w-[10px]">â—</span>
                                            <span>{impact.text}</span>
                                        </div>
                                    )) : (
                                        <p className="text-center text-green-600 font-bold">ä¸å¯æ€è­°ï¼æ‚¨ç¶­æŒäº†å®Œç¾çš„ç”Ÿæ´»ç‹€æ…‹ï¼</p>
                                    )}
                                </div>
                                <button onClick={() => setShowResult(false)} className="w-full bg-slate-800 text-white py-3 rounded-xl font-bold">é‡æ–°é«”é©—</button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<PovertySim />);
    </script>
</body>
</html>
